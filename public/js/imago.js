$(function(){new t(".product-imago-banner .masked-inner","/images/imago/sc1_01.jpg",1218,699,10,7,35,"_js-fold"),new t(".product-imago-life   .masked-inner","/images/imago/sc2_01.png",1329,976,10,7,11,"_js-fold"),new t(".product-imago-home   .masked-inner","/images/imago/sc5_01.png",1330,975,10,7,61,"_js-fold");if(!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))){var a=new ScrollMagic.Controller,e=(new ScrollMagic.Scene({triggerElement:".product-imago-banner",reverse:!1}).on("enter leave",function(e){$(".product-imago-banner ._js-fold").trigger("tileAnim")}).addTo(a),new ScrollMagic.Scene({triggerElement:".product-imago-life",reverse:!1}).on("enter leave",function(e){$(".product-imago-life ._js-fold").trigger("tileAnim")}).addTo(a),new ScrollMagic.Scene({triggerElement:".product-imago-home",reverse:!1}).on("enter leave",function(e){$(".product-imago-home ._js-fold").trigger("tileAnim")}).addTo(a),TweenMax.fromTo(".product-imago-banner .ac-image-01",.8,{x:-100,alpha:0},{x:0,alpha:1}));new ScrollMagic.Scene({triggerElement:".product-imago-banner .ac-image-02",reverse:!1}).setTween(e).addTo(a),e=TweenMax.fromTo(".product-imago-banner .ac-image-02",.8,{scale:1.3,alpha:0},{scale:1,alpha:1}),new ScrollMagic.Scene({triggerElement:".product-imago-banner .ac-image-02",reverse:!1}).setTween(e).addTo(a),e=TweenMax.fromTo(".product-imago-interface .ac-image-01",.8,{scale:1.3,alpha:0},{scale:1,alpha:1}),new ScrollMagic.Scene({triggerElement:".product-imago-interface",reverse:!1}).setTween(e).addTo(a);$(".an-scroll").length&&TweenMax.to(".an-scroll span",1.5,{y:"7px",ease:Circ.easeInOut,repeat:-1,yoyo:!0}),$("section").each(function(){if($el=$(this).find(".float-text"),$el.length){var e=TweenMax.staggerFromTo($el,.8,{y:40,alpha:0},{ease:Back.easeOut.config(1.7),y:0,alpha:1},.2);new ScrollMagic.Scene({triggerElement:this}).setTween(e).addTo(a)}})}function t(e,a,t,n,o,r,i,l){var c=document.createElement("div");c.className="foldImg "+l;for(var g=o*r,s=[],m=Math.round(t/o),d=Math.round(n/r),u=0;u<g;u++)s.push(new p(u,c,m,d,o,r));var f=new v(a,null,t,n,"prodImg",function(){for(var e=0;e<g;e++)s[e].drawSection(f.img,m,d)}),h=0;$(e).append(c),f.load(),$(c).on("tileAnim",function(e,a){for(a=null==a?i:a,h++,u=0;u<g;u++)s[u].neighbourCalledMe(a,h)})}function p(r,i,c,g,s,e){var a=this,m=document.createElement("div");m.className="tile";var l=document.createElement("canvas");l.className="canvas";var d=r%s*c,u=Math.floor(r/s)*g,f=document.createElement("div");f.className="black",m.appendChild(l);var h=c,p=g,v=90,w=90,M=s*e,T=0,x=0,y="0 50%",S="0",b="0",A=l.getContext("2d");a.drawSection=function(e,a,t){l.width=1*a,l.height=1*t;var n=r%s*a,o=Math.floor(r/s)*t;m.style.left=n+"px",m.style.top=o+"px",m.style.width=a+"px",m.style.height=t+"px",A.drawImage(e,r%s*h,Math.floor(r/s)*p,h,p,0,0,1*a,1*t),i.appendChild(m)};var C=!1;function E(){m.style.visibility="visible"}function _(){$(i).trigger("tileAnim",r)}function O(){r%s!=0&&r%s!=s-1&&0!=Math.floor(r/e)&&Math.floor(r/s)!=e-1||(S=r%s==0?(x=w,"100%"):r%s==s-1?(x=-w,"0"):(x=0,"50%"),b=0==Math.floor(r/e)?(T=-v,"100%"):Math.floor(r/s)==e-1?(T=v,"0"):(T=0,"50%"),y=S+" "+b)}a.neighbourCalledMe=function(e,a){if(!C){var t=e%s*c+.5*c,n=Math.floor(e/s)*g+.5*g,o=d+.5*c,r=u+.5*g;if(!(Math.sqrt(Math.pow(o-t,2)+Math.pow(r-n,2))>Math.max(c,g)+4)){C=!0,S=o<t?(x=w,"100%"):t<o?(x=-w,"0"):"50%",b=r<n?(T=-v,"100%"):n<r?(T=v,"0"):"50%",y=S+" "+b,TweenLite.set(m,{rotationX:T,rotationY:x,transformPerspective:500,transformOrigin:y});var i=0+.7*Math.random(),l=Quad.easeOut;.5*M<a&&(l=Back.easeOut,i+=.2),setTimeout(_,Math.max(0,1e3*i*.5)),m.appendChild(f),TweenLite.to(m,i,{rotationX:0,rotationY:0,transformOrigin:y,transformPerspective:500,ease:l,onStart:E,onComplete:O}),TweenLite.to(f,.9*i,{autoAlpha:0,ease:Quad.easeOut})}}},a.getTileW=function(){return c}}function v(e,a,l,c,t,n,o){function r(e){l&&c||(l=g.naturalWidth,c=g.naturalHeight),s=l/c,n&&n.call(i,e)}var g,s,m,d,i=this;(g=l&&c?new Image(l,c):new Image).src=e,i.img=g,t?g.className=t:g.style.position="absolute",i.load=function(){g.onload=r,g.src=e,g.onmousedown=function(e){e&&e.preventDefault&&e.preventDefault()},a&&(o?a.insertBefore(g,a.firstChild):a.appendChild(g))},i.destroy=function(){g.src="",g=null},i.scaleTo=function(e,a,t,n,o){var r=a/t,i=s;"fill"==e||"fit"==e&&(r=s,i=a/t),d=r<i?(m=Math.ceil(t*s),t):(m=a,Math.ceil(a/s)),"none"!=e?(g.style.width=m+"px",g.style.height=d+"px"):(m=l,d=c),"center"==n?g.style.marginLeft=Math.round(.5*(a-m))+"px":"left"==n?g.style.marginLeft="0px":"right"==n&&(g.style.marginLeft=Math.round(a-m)+"px"),"center"==o?g.style.marginTop=Math.round(.5*(t-d))+"px":"top"==o?g.style.marginTop="0px":"bottom"==o&&(g.style.marginTop=Math.round(t-d)+"px")},i.getW=function(){return m},i.getH=function(){return d}}});